<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Mays AI</title>

<style>
body {
  margin: 0;
  background: radial-gradient(circle at top, #0f172a, #020617);
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  color: white;
  height: 100vh;
  display: flex;
  justify-content: center;
}

.app {
  width: 100%;
  max-width: 480px;
  display: flex;
  flex-direction: column;
  height: 100vh;
}

/* ===== NAME SCREEN ===== */
.name-screen {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  padding: 24px;
}

.name-title {
  font-size: 30px;
  font-weight: 700;
  text-align: center;
  margin-bottom: 24px;
  background: linear-gradient(270deg,#38bdf8,#22c55e,#a855f7,#38bdf8);
  background-size: 600% 600%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: gradientMove 6s ease infinite;
}

input {
  padding: 14px;
  border-radius: 16px;
  border: none;
  background: #020617;
  color: white;
  font-size: 16px;
  outline: none;
}

button {
  margin-top: 14px;
  padding: 14px;
  border-radius: 16px;
  border: none;
  background: linear-gradient(135deg,#2563eb,#38bdf8);
  color: white;
  font-size: 16px;
}

/* ===== CHAT ===== */
.chat {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.bubble {
  max-width: 80%;
  padding: 12px 14px;
  border-radius: 16px;
  line-height: 1.5;
}

.user {
  align-self: flex-end;
  background: #2563eb;
}

.ai {
  align-self: flex-start;
  background: #020617;
  box-shadow: 0 0 12px rgba(56,189,248,0.15);
}

/* ===== INPUT BAR ===== */
.input-bar {
  padding: 12px;
  display: flex;
  gap: 8px;
  background: rgba(2,6,23,0.95);
  backdrop-filter: blur(8px);
}

.input-bar input {
  flex: 1;
}

.send {
  width: 48px;
  border-radius: 50%;
  background: linear-gradient(135deg,#22c55e,#38bdf8);
  font-size: 18px;
}

/* ===== ANIMATIONS ===== */
@keyframes gradientMove {
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

.hidden { display:none; }
</style>
</head>

<body>

<div class="app">

<!-- NAME SCREEN -->
<div class="name-screen" id="nameScreen">
  <div class="name-title" id="typingName"></div>
  <input id="username" placeholder="What should I call you?" />
  <button onclick="saveName()">Continue</button>
</div>

<!-- CHAT SCREEN -->
<div class="hidden" id="chatScreen">
  <div class="chat" id="chat"></div>

  <div class="input-bar">
    <input id="question" placeholder="Ask anything…" />
    <button class="send" onclick="askAI()">➤</button>
  </div>
</div>

</div>

<script>
const typingText = "Mays AI";
let i = 0;
const typingEl = document.getElementById("typingName");

function typeName() {
  if (i < typingText.length) {
    typingEl.innerText += typingText[i++];
    setTimeout(typeName, 120);
  }
}
typeName();

const nameScreen = document.getElementById("nameScreen");
const chatScreen = document.getElementById("chatScreen");
const chat = document.getElementById("chat");

const savedName = localStorage.getItem("mays_name");
if (savedName) startChat(savedName);

function saveName() {
  const name = document.getElementById("username").value.trim();
  if (!name) return;
  localStorage.setItem("mays_name", name);
  startChat(name);
}

function startChat(name) {
  nameScreen.classList.add("hidden");
  chatScreen.classList.remove("hidden");
  addAI(`Hi ${name}. I’m Mays AI.`);
}

function addUser(text) {
  const d = document.createElement("div");
  d.className = "bubble user";
  d.innerText = text;
  chat.appendChild(d);
  chat.scrollTop = chat.scrollHeight;
}

function addAI(text) {
  const d = document.createElement("div");
  d.className = "bubble ai";
  d.innerText = text;
  chat.appendChild(d);
  chat.scrollTop = chat.scrollHeight;
}

async function askAI() {
  const q = document.getElementById("question").value;
  if (!q.trim()) return;
  document.getElementById("question").value = "";

  addUser(q);
  addAI("Thinking…");

  try {
    const res = await fetch("https://mays-ai-backend.onrender.com/api/chat", {
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({ question:q })
    });
    const data = await res.json();
    chat.lastChild.innerText = data.answer || "No response.";
  } catch {
    chat.lastChild.innerText = "Server error.";
  }
}
</script>

</body>
</html>
